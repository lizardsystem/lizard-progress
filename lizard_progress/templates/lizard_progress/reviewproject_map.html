{% block content %}



    <div id="mapid"></div>
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
       integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
       crossorigin=""></script>

    <script>

      var mymap = L.map('mapid').setView([52.422, 5.268316940015781], 13);

      L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(mymap);


      function styler(feature) {
        if (feature.properties.completion === 1.0) {
            return {color: "green", fillColor: 'green'};
        } else if(feature.properties.completion === 0.0) {
            return {color: "red", fillColor: 'red' };
        } else {
          return {color: "orange", fillColor: 'orange'};
        }
      };

      var geojsonCircleOptions = {
          radius: 8,
          weight: 1,
          opacity: 1,
          fillOpacity: 0.8
      };

      function pointToLayer (feature, latlng) {
        return L.circleMarker(latlng, geojsonCircleOptions);
      }

      const geojsonLayerOptions = {
        'pointToLayer': pointToLayer,
        'style': styler
      }

      var geojsonLayer = L.geoJSON([], geojsonLayerOptions).addTo(mymap);
      geojsonLayer.addData({{ view.reviewproject.generate_feature_collection|safe }});

    </script>

    <h1> HELLO THIS IS MAP </h1>

    {{ view.reviewproject.generate_feature_collection }}

{% endblock content %}


