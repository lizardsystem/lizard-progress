{% extends "lizard_map/wms.html" %}
{% load workspaces %}

{% block css %}
{{ block.super }}
<link rel="stylesheet"
      type="text/css"
      href="{{ STATIC_URL }}lizard_progress/lizard_progress.css" />
{% endblock css %}

{% block map-javascript %}
{{ block.super }}
<script type="text/javascript"
        src="{{ STATIC_URL }}lizard_progress/lizard_progress.js"></script>
{% endblock map-javascript %}

{% block sidebar %}
<div class="sidebarbox sidebarbox-stretched">
  <h2>Kaart</h2>
  <ul class="without-bullets">
{% for layer in view.available_layers %}
    <li class="workspace-acceptable"
        data-name="{{ layer.name }}"
        data-adapter-class="{{ layer.adapter }}"
        data-adapter-layer-json="{{ layer.json }}">{{ layer.name }}</li>
{% endfor %}
  </ul>

{% with view.open_changerequests as changerequests %}
  {% if changerequests %}
  <h2>Open aanvragen</h2>
  <ul>
  {% for cr in changerequests %}
    <li class="workspace-acceptable"
         data-name="{{ cr.adapter_layer_name }}"
         data-adapter-class="{{ cr.adapter_class }}"
         data-adapter-layer-json="{{ cr.adapter_layer_json }}">{{ cr.adapter_layer_name }}</li>
  {% endfor %}
  </ul>
  {% endif %}
{% endwith %}
</div>

{# Put workspace things back in the sidebar, boo Lizard 4 #}
{% workspace_edit view.workspace_edit %}
{% comment %}
  I think this is unused
  {% collage_edit view.collage_edit %}
{% endcomment %}

{% endblock sidebar %}

{# We don't want a secondary sidebar #}
{% block secondary-sidebar %}
{% endblock secondary-sidebar %}

{# So we don't need sidebar actions either #}
{% block sidebar-actions %}
{% endblock sidebar-actions %}
